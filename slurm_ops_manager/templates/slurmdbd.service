[Unit]
Description=Slurm DBD accounting daemon
After=network.target snap.munge.munged.service
ConditionPathExists=/etc/slurm/slurmdbd.conf

[Service]
User=slurm
Group=slurm
Type=forking
EnvironmentFile=-/etc/sysconfig/slurmdbd
ExecStartPre=mkdir -p /run/slurm && chown -R slurm:slurm /run/slurm
ExecStart=/usr/local/sbin/slurmdbd -vvvvv
ExecReload=/bin/kill -HUP $MAINPID
PIDFile=/run/slurm/slurmdbd.pid
LimitNOFILE=65536
TasksMax=infinity

[Install]
WantedBy=multi-user.target
